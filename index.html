<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        *{
            margin: 0;
        }
        .holder{
            height: 100vh;
            width: 100vw;
            background-color: black;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .container{
            background-color: pink;
            height: 90vh;
            width: 40vw;
            text-align: center;
            display: block;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-weight: 600;
        }
        .jumble{
            color: black;
            font-size: xx-large;
            margin-top: 5vh;
        }
        #answer{
            width: 30vw;
            height: 10vh;
            font-size: xx-large;
            margin-top: 10vh;
            outline: 0;
            border: 0; 
            border-bottom: 2px solid red;  
            background-color: pink;
            /* border-radius:  3px; */
        }
        button{
            height: 10vh;
            width: 10vw;
            margin-top:3vh;
        }
        #jumbled-sentence{
            border-bottom: 1px solid red;
            /* border-radius:  px; */
        }
        .nice{
            color: red;
        }
        #scores{
            color: red;
        }
    </style>

</head>
<body>
    <div class="holder">
        <div class="container">
            <p class="jumble" >JUMBLED WORD: <br> <span id="jumbled-sentence"></span> </p>
            <input type="text" name="" id="answer" placeholder="Enter your answer" ><br> 
            <button type="submit" id="submit" >Submit</button>
            <p id="message"></p>
            <p><span class="nice">Time Left: </span><span id="current-time"></span>sec<span id="scores" > | Score : </span><span id="score">0/7</span> </p>
        </div>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function(){
        
            var sentences = [
                { original: "The quick brown fox", jumbled: "ehT kciuq nworb xof" },
                { original: "Jumps over the lazy dog", jumbled: "spmuJ revo eht yzal god" },
                { original: "Fortune favors the bold", jumbled: "eFotrnu srofav eht dlob" },
                { original: "The cat chases the mouse", jumbled: "ehT tac sesahc eht esuom" },
                { original: "Beauty is in the eye of the beholder", jumbled: "taeuyB si ni eht eye fo eht redolheb" },
                { original: "Better late than never", jumbled: "eBtter etla naht revne" },
                { original: "Practice makes perfect", jumbled: "tPractcie sekam cerfpet" }
            ];
    
            var jubmledSentencesElement = document.getElementById("jumbled-sentence");
            var index = 0;
            var inputField = document.getElementById("answer");
            var messageElement = document.getElementById("message");
            var timeLeft = 101;
            var timer;
            var timerElement = document.getElementById("current-time");
            var score=0;
            var scoreElement = document.getElementById('score');

            // shuffling an array
            function shuffleArray(array) {
                let shuffled = array.slice(); // Create a copy of the array
                for (let i = shuffled.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
                }
                return shuffled;
            }

            // Original array
            let originalArray = [0, 1, 2, 3, 4, 5, 6];

            // Shuffle the array and store it in a new variable
            let shuffledArray = shuffleArray(originalArray);



            function startGame(){

                currentIndex = shuffledArray[index];
                timeLeft = 101;
                displayNextJumble();
                startTimer();
                // alert(shuffledArray+ "_" + currentIndex);
            }
            

            function displayNextJumble(){
                if (index < sentences.length){
                    jubmledSentencesElement.textContent = sentences[currentIndex].jumbled;
                    inputField.value= "";
                    inputField.focus();
                    // document.getElementById("submit").focus();
                    // messageElement.textContent = "testing";
                }
                else {
                    clearInterval(timer);
                    messageElement.textContent = "Congratulations! You solved all the jumbled sentences!";
                    alert("Congratulations! You solved all the jumbled sentences!");
                    window.location.href = "final.html";
                }
            }

            function checkAnswer() {
                var userAnswer = inputField.value.trim();
                if (userAnswer === sentences[currentIndex].original) {
                    index++;
                    currentIndex=shuffledArray[index];
                    messageElement.textContent = "Correct! Answer.";
                    score++;
                    scoreElement.textContent=score + "/7";
                    popup();
                    displayNextJumble();
                } else {
                    messageElement.textContent = "Incorrect! Starting over.";
                    popup();
                    // startGame();
                }
            }

            function startTimer() {
                clearInterval(timer);
                timer = setInterval(function() {
                    timeLeft--;
                    timerElement.textContent = timeLeft ;
                    if (timeLeft <= 0) {
                        clearInterval(timer);
                        messageElement.textContent = "Time's up! Starting over.";
                        popup();
                        alert("Game over. Click ok to restart");
                        score=0;
                        scoreElement.textContent=score + "/7";
                        // alert("Times up");
                        startGame();
                    }
                }, 1500);
            }

            function popup(){
                setTimeout(function() {
                messageElement.textContent="";
            }, 3000);
                // messageElement.style.display= 'block';
            }

            function moveFocusToButton(event) {
            if (event.key === 'Enter') {
                document.getElementById('submit').focus();
            }
        }

        window.onload = function() {
            inputField.addEventListener('keydown', moveFocusToButton);
        }

        document.getElementById("submit").addEventListener("click", checkAnswer);

            startGame();
        });
    </script>
</body>
</html>